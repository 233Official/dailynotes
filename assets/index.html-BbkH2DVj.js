import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,a,o}from"./app-DX9gUdjC.js";const n={};function l(p,e){return o(),r("div",null,e[0]||(e[0]=[a('<h1 id="钓鱼邮件" tabindex="-1"><a class="header-anchor" href="#钓鱼邮件"><span>钓鱼邮件</span></a></h1><h2 id="伪造伪造发件人" tabindex="-1"><a class="header-anchor" href="#伪造伪造发件人"><span>伪造伪造发件人</span></a></h2><blockquote><p><a href="https://www.cloudflare-cn.com/learning/email-security/what-is-email-spoofing/" target="_blank" rel="noopener noreferrer">什么是电子邮件假冒？| Cloudflare | Cloudflare (cloudflare-cn.com)</a></p><p><a href="https://saucer-man.com/information_security/452.html#cl-4" target="_blank" rel="noopener noreferrer">邮件伪造原理和实践 - SAUCERMAN (saucer-man.com)</a></p><p><a href="https://www.ti0s.com/39.html" target="_blank" rel="noopener noreferrer">关于伪造邮件的简单研究 (ti0s.com)</a></p></blockquote><p>在<a href="https://www.cloudflare-cn.com/learning/email-security/what-is-email/" target="_blank" rel="noopener noreferrer">电子邮件</a>假冒中，攻击者使用一个电子邮件头掩盖自己的身份，冒充成一个合法的发件人。（电子邮件头是一个代码片段，其中包含有关邮件的重要细节，如发件人、收件人和跟踪数据。）</p><p>攻击者使用脚本伪造电子邮件收件人可以看到的字段。这些字段位于电子邮件头中，包括“发件人”和“回复”地址。如下例子显示了这些字段在一封假冒电子邮件中的样子：</p><ul><li><strong>From:</strong> “Legitimate Sender” email@legitimatecompany.com</li><li><strong>Reply-to:</strong> email@legitimatecompany.com</li></ul><p>之所以能够伪造这些字段，原因是<a href="https://www.cloudflare-cn.com/learning/email-security/what-is-smtp/" target="_blank" rel="noopener noreferrer">简单邮件传输协议（SMTP）</a>没有内建验证电子邮件地址的机制。事实上，发件人和收件人的电子邮件存在于电子邮件的两个位置：邮件头和 SMTP 信封。电子邮件头包括收件人可见的字段。然而，SMTP 信封包含用于邮件服务器用于将电子邮件发送到正确地址的信息。但这些字段不必一致，电子邮件也能成功发送。因为 SMTP 信封从不检查邮件头，而且收件人不能看到信封中的信息，因此电子邮件假冒相对容易实现。</p><hr><p>电子邮件收件人可按照如下步骤来防范电子邮件假冒：</p><ul><li><strong>要警惕那些鼓励迅速或紧急采取行动的信息：</strong> 对于任何要求提供个人信息、付款或其他即时行动的意外或自发的电子邮件，收件人应持怀疑态度。例如，如果突然出现要求更改某个应用程序登录信息的要求，就应该表示怀疑。</li><li>**检查电子邮件头：**很多电子邮件客户端提供查看电子邮件头的方法。例如， &lt;a href=&#39;https://it.umn.edu/services-technologies/how-tos/gmail-view-email-headers&#39; &#39;target=_blank&#39;&gt;在 Gmail 中，在一封电子邮件中点击“显示原始邮件”，即可查看其电子邮件头的内容。查看邮件头时，寻找“Received”部分。如果域名不同于“发件人”地址中显示的域名，则该电子邮件很可能是伪造的。</li><li>**使用软件来过滤假冒邮件：**反垃圾邮件软件可要求对传入的电子邮件进行身份验证，从而阻止假冒企图。</li></ul><p>域名所有者也可采取措施来防止攻击者从其域发送消息。为此，组织可创建专用于身份验证的<a href="https://www.cloudflare-cn.com/learning/dns/what-is-dns/" target="_blank" rel="noopener noreferrer">域名系统（DNS）</a>记录。其中包括：</p><ul><li><strong><a href="https://www.cloudflare-cn.com/learning/dns/dns-records/dns-spf-record/" target="_blank" rel="noopener noreferrer">SPF 记录</a>：</strong> 发件人策略框架（SPF）记录列出被授权从特定域发送电子邮件的服务器。这样，如果有人编造了一个与某个域相关联的电子邮件地址，这个地址不会出现在 SPF 记录中，也不会通过认证。</li><li><strong><a href="https://www.cloudflare-cn.com/learning/dns/dns-records/dns-dkim-record/" target="_blank" rel="noopener noreferrer">DKIM 记录</a>：</strong> 域名密匙确认邮件（DKIM） 记录使用一对密钥进行身份验证：一个公钥和一个私钥。公钥存储于 DKIM 记录中，私钥对 DKIM 头进行数字签名。如果假冒电子邮件来自一个具有 DKIM 记录的域，无法使用正确的密钥签名，因而无法通过验证。</li><li><strong><a href="https://www.cloudflare-cn.com/learning/dns/dns-records/dns-dmarc-record/" target="_blank" rel="noopener noreferrer">DMARC 记录</a>：</strong> 基于域名的消息认证报告与一致性（DMARC）记录包含 DMARC 策略，在检查 SPF 和 DKIM 记录后，告诉邮件服务器如何处理。域名所有者可以根据这些检查设置规则，决定是否阻止、允许或传递消息。由于 DMARC 策略会审查其他身份验证策略，并允许域所有者设置更具体的规则，因此这些记录为防止电子邮件假冒增加了另一层保护。</li></ul><p>在组织层面，安全主管也可以采取措施，通过实施网络钓鱼和<a href="https://www.cloudflare-cn.com/learning/ddos/glossary/malware/" target="_blank" rel="noopener noreferrer">恶意软件</a>保护，防止员工受到电子邮件假冒侵害。</p><hr><p>以 Postfix + Gophish 为例</p><p>在 <code>Users &amp; Groups</code> 中设置靶机登录的目标邮箱地址</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170440685.png" alt="image-20240617043652932"></p><p>在 <code>Sending Profiles</code> 中设置邮件服务器的相关信息</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170440246.png" alt="image-20240617044001139"></p><blockquote><p>测试邮件内容如下：</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170440443.png" alt="image-20240617044039405"></p></blockquote><p>在 <code>Email Templates</code> 中可以设置钓鱼邮件模板，在 <code>Envelope Sender</code> 那一栏可以伪造发件人昵称与邮箱</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170444353.png" alt="image-20240617044410255"></p><hr><p>在 <code>Campaigns</code> 中配置具体活动</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170450717.png" alt="image-20240617045010643"></p><p>点击 <code>Send Test Email</code> 可以手动尝试发一封邮件</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170449492.png" alt="image-20240617044902437"></p><p>然后在靶机邮箱中可以看到对应邮件</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170451908.png" alt="image-20240617045149858"></p><p>可以看到这里拿 Foxmail 打开是看不出来伪造之前的发件人的</p><p>查看邮件原始信息可以看到如下信息：</p><p><img src="http://cdn.ayusummer233.top/DailyNotes/202406170506603.png" alt="image-20240617050643574"></p><hr><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><ul><li><a href="https://xz.aliyun.com/t/6325?time__1311=n4%2BxnD0DRDBDclCKDsAoxCqxmwuMDIOq0Iqx&amp;alichlgref=https%3A%2F%2Fgithub.com%2Ftib36%2FPhishingBook%3Ftab%3Dreadme-ov-file" target="_blank" rel="noopener noreferrer">钓鱼邮件的投递和伪造 - 先知社区 (aliyun.com)</a></li></ul><hr>',36)]))}const m=t(n,[["render",l],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E9%92%93%E9%B1%BC/%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6/","title":"钓鱼邮件","lang":"zh-CN","frontmatter":{"description":"钓鱼邮件 伪造伪造发件人 什么是电子邮件假冒？| Cloudflare | Cloudflare (cloudflare-cn.com) 邮件伪造原理和实践 - SAUCERMAN (saucer-man.com) 关于伪造邮件的简单研究 (ti0s.com) 在电子邮件假冒中，攻击者使用一个电子邮件头掩盖自己的身份，冒充成一个合法的发件人。（电子邮件...","head":[["meta",{"property":"og:url","content":"https://233official.github.io/dailynotes/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E9%92%93%E9%B1%BC/%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6/"}],["meta",{"property":"og:site_name","content":"DailyNotes"}],["meta",{"property":"og:title","content":"钓鱼邮件"}],["meta",{"property":"og:description","content":"钓鱼邮件 伪造伪造发件人 什么是电子邮件假冒？| Cloudflare | Cloudflare (cloudflare-cn.com) 邮件伪造原理和实践 - SAUCERMAN (saucer-man.com) 关于伪造邮件的简单研究 (ti0s.com) 在电子邮件假冒中，攻击者使用一个电子邮件头掩盖自己的身份，冒充成一个合法的发件人。（电子邮件..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://cdn.ayusummer233.top/DailyNotes/202406170440685.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-17T03:32:15.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-17T03:32:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"钓鱼邮件\\",\\"image\\":[\\"http://cdn.ayusummer233.top/DailyNotes/202406170440685.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170440246.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170440443.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170444353.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170450717.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170449492.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170451908.png\\",\\"http://cdn.ayusummer233.top/DailyNotes/202406170506603.png\\"],\\"dateModified\\":\\"2025-04-17T03:32:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"咸鱼型233\\",\\"url\\":\\"https://233official.github.io/dailynotes/\\"}]}"]],"date":"2024-06-16T21:20:47.000Z"},"headers":[{"level":2,"title":"伪造伪造发件人","slug":"伪造伪造发件人","link":"#伪造伪造发件人","children":[]},{"level":2,"title":"相关链接","slug":"相关链接","link":"#相关链接","children":[]}],"git":{"createdTime":1718572847000,"updatedTime":1744860735000,"contributors":[{"name":"233Mac","username":"233Mac","email":"ayusummer233@vip.qq.com","commits":2,"url":"https://github.com/233Mac"},{"name":"233","username":"233","email":"ayusummer233@gmail.com","commits":1,"url":"https://github.com/233"},{"name":"233PC","username":"233PC","email":"ayusummer233@gmail.com","commits":2,"url":"https://github.com/233PC"}]},"readingTime":{"minutes":4.41,"words":1323},"filePathRelative":"网络安全/钓鱼/钓鱼邮件/index.md","localizedDate":"2024年6月16日","excerpt":"","autoDesc":true}');export{m as comp,c as data};
