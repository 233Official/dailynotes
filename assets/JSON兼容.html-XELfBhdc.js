import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,a as n,d as k,e as t,r as o,o as p,f as s,b as i}from"./app-CFt4SMiv.js";const c={};function A(m,e){const h=o("Tabs");return p(),d("div",null,[e[4]||(e[4]=n('<h1 id="json-compatible-encoder" tabindex="-1"><a class="header-anchor" href="#json-compatible-encoder"><span>JSON Compatible Encoder</span></a></h1><blockquote><p><a href="https://fastapi.tiangolo.com/zh/tutorial/encoder/" target="_blank" rel="noopener noreferrer">JSON Compatible Encoder - FastAPI (tiangolo.com)</a></p></blockquote><p>在某些情况下我们可能需要将数据类型(比如Pydantic model)转换为 JSON 兼容的数据类型(如 dict, list 等等)</p><p>例如, 如果我们需要将他存入数据库, FastAPI 提供了 <code>jsonable_encoder()</code> 函数</p><hr><h2 id="使用-jsonable-encoder" tabindex="-1"><a class="header-anchor" href="#使用-jsonable-encoder"><span>使用 <code>jsonable_encoder</code></span></a></h2><p>我们假设当前我们有一个只接受 JSON 兼容数据的数据库 <code>fake_db</code>.</p><p>例如, 它不接受 <code>datetime</code> 对象, 因为这些对象与 JSON 不兼容</p><p>所以, <code>datetime</code> 对象必须转化为包含 ISO 格式数据的 <code>str</code></p><p>同样, 这个数据库不会接收到 Pydantic model(带有属性的对象), 只接收 <code>dict</code></p><p>我们可以使用 <code>jsonable_encoder</code> , 它接收一个对象, 比如 Pydantic model, 并返回一个兼容 JSON 的版本</p>',11)),k(h,{id:"33",data:[{id:"Python 3.6~3.10"},{id:"其它"}],active:0},{title0:t(({value:a,isActive:l})=>e[0]||(e[0]=[s("Python 3.6~3.10")])),title1:t(({value:a,isActive:l})=>e[1]||(e[1]=[s("其它")])),tab0:t(({value:a,isActive:l})=>e[2]||(e[2]=[i("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python","data-title":"python",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"from"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," datetime "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," datetime")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"from"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," typing "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," Optional")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"from"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," fastapi "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," FastAPI")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"from"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," fastapi.encoders "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," jsonable_encoder")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"from"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," pydantic "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," BaseModel")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"fake_db "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," {}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"class"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}}," Item"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#E5C07B"}},"BaseModel"),i("span",{style:{"--shiki-light":"#C18401","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    title: "),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"str")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    timestamp: datetime")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    description: Optional["),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"str"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"] "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," None")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"app "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}}," FastAPI"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"()")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"@app"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"put"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"/items/'),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"{id}"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"def"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," update_item"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-light-font-style":"inherit","--shiki-dark":"#D19A66","--shiki-dark-font-style":"italic"}},"id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},":"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}}," str"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},","),i("span",{style:{"--shiki-light":"#986801","--shiki-light-font-style":"inherit","--shiki-dark":"#D19A66","--shiki-dark-font-style":"italic"}}," item"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},":"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#ABB2BF"}}," Item"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    json_compatible_item_data "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}}," jsonable_encoder"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(item)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    fake_db["),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"] "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," json_compatible_item_data")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])),tab1:t(({value:a,isActive:l})=>e[3]||(e[3]=[i("p",null,null,-1)])),_:1}),e[5]||(e[5]=n("<p>在这个实例中, 它将 Pydantic 模型转化为 dict, 将 <code>datetime</code> 转化为 <code>str</code>;</p><p>调用它的结果可以用 Python 标准 <code>json.dumps ()</code> 进行编码。</p><p>它不返回包含 JSON 格式数据(以字符串形式)的大型 <code>str</code>。它返回一个 Python 标准数据结构(例如 <code>dict</code>) ，其值和子值都与 JSON 兼容。</p><hr>",4))])}const g=r(c,[["render",A],["__file","JSON兼容.html.vue"]]),b=JSON.parse('{"path":"/%E5%90%8E%E7%AB%AF/FastAPI/JSON%E5%85%BC%E5%AE%B9.html","title":"JSON Compatible Encoder","lang":"zh-CN","frontmatter":{"category":"后端","tags":["FastAPI","Python","Web","后端"],"description":"JSON Compatible Encoder JSON Compatible Encoder - FastAPI (tiangolo.com) 在某些情况下我们可能需要将数据类型(比如Pydantic model)转换为 JSON 兼容的数据类型(如 dict, list 等等) 例如, 如果我们需要将他存入数据库, FastAPI 提供了 json...","head":[["meta",{"property":"og:url","content":"https://233official.github.io/dailynotes/%E5%90%8E%E7%AB%AF/FastAPI/JSON%E5%85%BC%E5%AE%B9.html"}],["meta",{"property":"og:site_name","content":"DailyNotes"}],["meta",{"property":"og:title","content":"JSON Compatible Encoder"}],["meta",{"property":"og:description","content":"JSON Compatible Encoder JSON Compatible Encoder - FastAPI (tiangolo.com) 在某些情况下我们可能需要将数据类型(比如Pydantic model)转换为 JSON 兼容的数据类型(如 dict, list 等等) 例如, 如果我们需要将他存入数据库, FastAPI 提供了 json..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-17T03:32:15.000Z"}],["meta",{"property":"article:tag","content":"FastAPI"}],["meta",{"property":"article:tag","content":"Python"}],["meta",{"property":"article:tag","content":"Web"}],["meta",{"property":"article:tag","content":"后端"}],["meta",{"property":"article:modified_time","content":"2025-04-17T03:32:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JSON Compatible Encoder\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-17T03:32:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"咸鱼型233\\",\\"url\\":\\"https://233official.github.io/dailynotes/\\"}]}"]],"date":"2024-04-30T06:04:55.000Z"},"headers":[{"level":2,"title":"使用 jsonable_encoder","slug":"使用-jsonable-encoder","link":"#使用-jsonable-encoder","children":[]}],"git":{"createdTime":1714457095000,"updatedTime":1744860735000,"contributors":[{"name":"233Mac","username":"233Mac","email":"ayusummer233@vip.qq.com","commits":2,"url":"https://github.com/233Mac"},{"name":"233JG","username":"233JG","email":"ayusummer233@gmail.com","commits":1,"url":"https://github.com/233JG"}]},"readingTime":{"minutes":1.14,"words":342},"filePathRelative":"后端/FastAPI/JSON兼容.md","localizedDate":"2024年4月30日","excerpt":"","autoDesc":true}');export{g as comp,b as data};
